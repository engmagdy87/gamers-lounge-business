(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SponsorsAddEdit"],{"0203":function(e,t,s){},"0b4b":function(e,t,s){},1485:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"preview-image"},[e.disabled?e._e():s("div",{staticClass:"close",attrs:{role:"button"},on:{click:e.fireDeleteModal}},[e._v(" × ")]),s("img",{attrs:{src:e.image.url,alt:"preview"}})])},r=[],i={props:["image","setShowDeleteDialogFlag","openedFor","imageIndex","disabled"],methods:{fireDeleteModal:function(){this.setShowDeleteDialogFlag(!0,this.image.id,this.openedFor,this.imageIndex,"image")}}},o=i,n=(s("19cf"),s("2877")),l=Object(n["a"])(o,a,r,!1,null,"1f659b06",null);t["a"]=l.exports},"19cf":function(e,t,s){"use strict";s("0203")},"50e7":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"delete-modal",style:e.showFlag?"display:block":"display:none",on:{click:function(t){return e.setShowDeleteDialogFlag(!1)}}},[s("div",{staticClass:"delete-modal-content",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"delete-modal-header"},[s("span",{staticClass:"close",on:{click:function(t){return e.setShowDeleteDialogFlag(!1)}}},[e._v("×")]),s("h2",[e._v("Delete "+e._s(e.item))])]),s("div",{staticClass:"delete-modal-body"},[s("form",[s("div",{staticClass:"form-group delete-modal-body__text"},[s("p",[e._v("Do you want to delete this "+e._s(e.item.toLowerCase())+"?")])]),s("button",{staticClass:"btn float-right",attrs:{type:"button"},on:{click:function(t){return e.setShowDeleteDialogFlag(!1)}}},[e._v(" Cancel ")]),s("button",{staticClass:"btn btn-danger float-right",attrs:{type:"button"},on:{click:e.deleteAction}},[e._v(" Delete ")])])])])])},r=[],i={props:["showFlag","setShowDeleteDialogFlag","item","deleteAction"]},o=i,n=(s("f9a7"),s("2877")),l=Object(n["a"])(o,a,r,!1,null,"d3f2235c",null);t["a"]=l.exports},"60bc":function(e,t,s){"use strict";s("0b4b")},"6c8e":function(e,t,s){},f9a7:function(e,t,s){"use strict";s("6c8e")},fea4:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[e._m(0),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v(" "+e._s(e.operation)+" ")])])]),s("h4",{staticClass:"card-name",attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.operation))]),s("form",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4"},[s("base-input",{attrs:{type:"text",label:"Name",placeholder:"Enter Name",autofocus:!0,isRequired:!0},model:{value:e.sponsor.name,callback:function(t){e.$set(e.sponsor,"name",t)},expression:"sponsor.name"}}),s("ErrorMessage",{attrs:{fieldErrors:e.errors.name}})],1),s("div",{staticClass:"col-12 col-md-4"},[s("base-input",{attrs:{type:"number",label:"Order",placeholder:"Enter Sponsor Order",isRequired:!0,min:"1"},model:{value:e.sponsor.order,callback:function(t){e.$set(e.sponsor,"order",t)},expression:"sponsor.order"}})],1),s("div",{staticClass:"col-12 col-md-4 mt-auto mb-auto"},[s("div",{staticClass:"custom-control custom-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sponsor.is_enabled,expression:"sponsor.is_enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"enabled"},domProps:{checked:Array.isArray(e.sponsor.is_enabled)?e._i(e.sponsor.is_enabled,null)>-1:e.sponsor.is_enabled},on:{change:function(t){var s=e.sponsor.is_enabled,a=t.target,r=!!a.checked;if(Array.isArray(s)){var i=null,o=e._i(s,i);a.checked?o<0&&e.$set(e.sponsor,"is_enabled",s.concat([i])):o>-1&&e.$set(e.sponsor,"is_enabled",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.sponsor,"is_enabled",r)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"enabled"}},[e._v("Publish Sponsor")])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("base-input",{attrs:{type:"url",label:"Link",placeholder:"Enter Link",isRequired:!0},model:{value:e.sponsor.link,callback:function(t){e.$set(e.sponsor,"link",t)},expression:"sponsor.link"}}),s("ErrorMessage",{attrs:{fieldErrors:e.errors.link}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Places")]),s("multiselect",{attrs:{options:e.SPONSERS_PLACES,multiple:!0,"close-on-select":!1,"clear-on-select":!1,placeholder:"Choose Sponsor Places"},model:{value:e.sponsor.places,callback:function(t){e.$set(e.sponsor,"places",t)},expression:"sponsor.places"}}),s("ErrorMessage",{attrs:{fieldErrors:e.errors.places}})],1)])]),s("div",{staticClass:"row mt-3 mb-3"},[s("div",{staticClass:"col"},[s("div",[e._m(1),s("input",{ref:"img_main",attrs:{type:"file",id:"img_main",accept:"image/png, image/jpeg, image/svg"},on:{change:function(t){return e.setFile(t,"img_main")}}}),s("br"),void 0!==e.editData&&"Edit Sponsor"===e.operation&&""!==e.editData.image?s("ImagePreview",{attrs:{image:e.editData.image,setShowDeleteDialogFlag:e.setImageDataFlag,openedFor:"img_main"}}):e._e(),s("ErrorMessage",{attrs:{fieldErrors:e.errors.img_main}})],1)])]),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-info btn-fill float-right",attrs:{type:"button"},on:{click:e.saveData}},[e._v(" Save ")])]),s("div",{staticClass:"clearfix"}),s("DeleteDialog",{attrs:{showFlag:e.showFlag,setShowDeleteDialogFlag:e.setImageDataFlag,item:"Image",deleteAction:e.removeImage}})],1)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"breadcrumb-item"},[s("a",{attrs:{href:"/dashboard/sponsors"}},[e._v("Sponsors")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"mr-5",attrs:{for:"img_main"}},[e._v("Choose Main Image"),s("span",{staticClass:"error-message"},[e._v(" *")])])}],i=(s("8e6e"),s("cadf"),s("456d"),s("ac6a"),s("b54a"),s("96cf"),s("3b8d")),o=s("bd86"),n=s("2f62"),l=s("8e5f"),c=s.n(l),d=s("ede8"),u=(s("4360"),s("6e87")),p=(s("4ee1"),s("62c4")),m=s("1485"),h=s("50e7"),g="HOME",b="ABOUT_US",f=[g,b];function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var D={name:"",order:1,is_enabled:!1,places:[],link:"",img_main:""},w={data:function(){return{editData:this.$router.history.current.params.data,operation:this.$route.name,sponsor:_({},D),openedFor:"",imageIndex:null,showFlag:!1,imageId:null,errors:{},validation:{name:{isRequired:!0},order:{isRequired:!0},enabled:{isRequired:!0},places:{isRequired:!0},link:{isRequired:!0},"main image":{isRequired:!0}},aliases:{name:"name",order:"order",places:"places",is_enabled:"enabled",link:"link",img_main:"main image"}}},methods:_(_({},Object(n["b"])({createSponsor:u["a"].sponsors.actions.CREATE_SPONSOR,updateSponsor:u["a"].sponsors.actions.UPDATE_SPONSOR,deleteImage:u["a"].app.actions.DELETE_IMAGE})),{},{setImageDataFlag:function(e,t,s,a){this.showFlag=e,this.imageId=t,this.openedFor=s,this.imageIndex=a},setFile:function(e,t){var s=e.target.files;s.length&&(this.sponsor[t]=s[0])},saveData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(p["a"])(this.sponsor,this.aliases,this.validation),this.errors=_({},t.errors),0===t.length){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,s={name:this.sponsor.name,order:this.sponsor.order,places:this.sponsor.places,isEnabled:this.sponsor.is_enabled,link:this.sponsor.link},"Edit Sponsor"!==this.operation){e.next=14;break}return a=this.sponsor.img_main,a.url||(s=_(_({},s),{},{img_main:a})),e.next=11,this.updateSponsor(_(_({},s),{},{id:this.editData.id}));case 11:this.notifyVue("Sponsor Updated Successfully","success"),e.next=18;break;case 14:return s=_(_({},s),{},{img_main:this.sponsor.img_main}),e.next=17,this.createSponsor(s);case 17:this.notifyVue("Sponsor Created Successfully","success");case 18:this.sponsor=_({},D),this.$router.push("/dashboard/sponsors"),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](4),JSON.parse(e.t0).forEach((function(e){r.notifyVue(e.message,"danger")}));case 25:case"end":return e.stop()}}),e,this,[[4,22]])})));function t(){return e.apply(this,arguments)}return t}(),removeImage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteImage(this.imageId);case 2:e.sent,e.t0=this.openedFor,e.next="img_main"===e.t0?6:9;break;case 6:return this.editData.image="",this.sponsor.img_main="",e.abrupt("break",10);case 9:return e.abrupt("break",10);case 10:this.notifyVue("Image Deleted Successfully","success"),this.setImageDataFlag(!1,null,"",null);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),notifyVue:function(e,t){this.$notifications.notify({message:"<span>".concat(e,"</span>"),horizontalAlign:"right",verticalAlign:"top",type:t})}}),computed:{SPONSERS_PLACES:function(){return f}},beforeMount:function(){this.$router.history.current.params.data||"Edit Sponsor"!==this.$route.name||this.$router.push({path:"/dashboard/sponsors"})},mounted:function(){"Edit Sponsor"===this.$route.name&&(this.sponsor.name=this.editData.name,this.sponsor.order=this.editData.order,this.sponsor.places=this.editData.places,this.sponsor.is_enabled=this.editData.is_enabled,this.sponsor.link=this.editData.link,this.sponsor.img_main=this.editData.image||"")},components:{ErrorMessage:d["a"],ImagePreview:m["a"],DeleteDialog:h["a"],Multiselect:c.a}},y=w,S=(s("60bc"),s("2877")),k=Object(S["a"])(y,a,r,!1,null,null,null);t["default"]=k.exports}}]);
//# sourceMappingURL=SponsorsAddEdit.b0803266.js.map